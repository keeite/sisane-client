<div id="wrapper">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-heading" style="font-family:Oswald , serif;"  ng-include="'js/system/header.html'"></div>
                    <div class="panel-body" ng-cloak>
                        <div class="alert alert-success" role="alert" ng-show="debugging">
                            <h4>Debug:</h4>
                            {{bean|json}}
                        </div>                   
                        <form name="outerForm" class="form-horizontal text-left"  ng-show="!status">
                            <div ng-repeat="f in fields">
                                <!------------------------------------------------->       
                                <div ng-show="f.type == 'id'" 
                                     id="{{f.name}}-group" 
                                     class="form-group">
                                    <label class="col-sm-2 control-label" for="{{f.name}}">
                                        {{f.longname}}:
                                    </label>
                                    <div class="control col-sm-3">
                                        <input ng-model="bean[f.name]" 
                                               type="text" id="{{f.name}}" 
                                               class="form-control" name="{{f.name}}"
                                               placeholder="{{f.name}}"
                                               size="15" 
                                               disabled="disabled" />
                                    </div>
                                </div>
                                <!------------------------------------------------->                            
                                <div ng-show="f.type == 'text'" 
                                     id="{{f.name}}-group" 
                                     class="form-group" 
                                     ng-class="{'has-error': (outerForm[f.name].$error.pattern) ||
                                                             (outerForm[f.name].$error.required)}">
                                    <label class="col-sm-2 control-label" for="{{f.name}}">
                                        <span ng-show="{{f.required}}">*</span>
                                        {{f.longname}}:
                                    </label>
                                    <div class="control col-sm-8">                                   
                                        <input ng-model="bean[f.name]"
                                               type="text"
                                               class="form-control"                                           
                                               id="{{f.name}}"
                                               name="{{f.name}}"     
                                               ng-pattern="f.pattern"
                                               placeholder="{{f.name}}"                                             
                                               maxlength="{{f.maxlength}}"                                                                                               
                                               ng-required="{{f.required}}"                                                
                                               />
                                        <span class="help-block" ng-show="outerForm[f.name].$error.required">El campo es obligatorio</span>
                                        <span class="help-block" ng-show="outerForm[f.name].$error.pattern">El campo no tiene formato adecuado: {{f.help}}</span>
                                    </div>
                                </div>
                                <!------------------------------------------------->
                                <div class="form-group"                                 
                                     ng-show="show_obj_id_documento && (f.name == 'obj_id_documento')"
                                     ng-class="{'has-error': (outerForm.obj_id_documento.$error.required ||
                                                             outerForm.obj_id_documento.$error.exists ||
                                                             outerForm.obj_id_documento.$error.validatemin)}"
                                     ng-show="obj_id_documento">                                                                                                                                   
                                    <label class="col-sm-2 control-label" for="obj_id_documento">ID documento:</label>
                                    <div class="control col-sm-3">
                                        <div class="input-group foreign" id="obj_tipousuario_group">
                                            <span class="input-group-addon" id="obj__id_documento_button" ng-click="chooseOne('obj_id_documento', 'documento', 'DocumentoSelectionController')">
                                                <span class="glyphicon glyphicon-search">
                                                </span>
                                            </span>                                        
                                            <input type="text" 
                                                   ng-model-options="{debounce: 1000}" 
                                                   ng-change="obj_id_documento_change" 
                                                   ng-model="bean.obj_id_documento.id" 
                                                   validatemin="1" 
                                                   ng-required="true"  
                                                   aria-describedby="basic-addon2" 
                                                   class="form-control" 
                                                   id="obj_documento" 
                                                   name="obj_id_documento"
                                                   size="5" 
                                                   maxlength="5">                                        
                                            <span class="input-group-addon">
                                                <span>{{bean.obj_id_documento}}</span>
                                            </span>                                       
                                        </div>
                                        <span class="help-block" ng-show="outerForm.obj_id_documento.$error.required">El tipo de documento es obligatorio</span>
                                        <span class="help-block" ng-show="outerForm.obj_id_documento.$error.validatemin">Debes elegir un tipo de documento</span>
                                        <span class="help-block" ng-show="outerForm.obj_id_documento.$error.exists">El tipo de documento no existe</span>
                                    </div>
                                </div> 


                                <!------------------------------------------------->

                                <div class="form-group"                                 
                                     ng-show="show_obj_id_episodio && (f.name == 'obj_id_episodio')"
                                     ng-class="{'has-error': (outerForm.obj_id_episodio.$error.required ||
                                                             outerForm.obj_id_episodio.$error.exists ||
                                                             outerForm.obj_id_episodio.$error.validatemin)}"
                                     ng-show="show_obj_episodio">                                                                                                                                   
                                    <label class="col-sm-2 control-label" for="obj_id_episodio">ID episodio:</label>
                                    <div class="control col-sm-3">
                                        <div class="input-group foreign" id="obj_episodio_group">
                                            <span class="input-group-addon" id="obj_episodio_button" ng-click="chooseOne('obj_id_episodio', 'episodio', 'EpisodioSelectionController')">
                                                <span class="glyphicon glyphicon-search">
                                                </span>
                                            </span>                                        
                                            <input type="text" 
                                                   ng-model-options="{debounce: 1000}" 
                                                   ng-change="obj_id_episodio_change" 
                                                   ng-model="bean.obj_id_episodio.id" 
                                                   validatemin="1" 
                                                   ng-required="true"  
                                                   aria-describedby="basic-addon2" 
                                                   class="form-control" 
                                                   id="obj_episodio" 
                                                   name="obj_id_episodio"
                                                   size="5" 
                                                   maxlength="5">                                        
                                            <span class="input-group-addon">
                                                <span>{{bean.obj_id_episodio}}</span>
                                            </span>                                       
                                        </div>
                                        <span class="help-block" ng-show="outerForm.obj_id_episodio.$error.required">El  episodio es obligatorio</span>
                                        <span class="help-block" ng-show="outerForm.obj_id_episodio.$error.validatemin">Debes elegir un episodio</span>
                                        <span class="help-block" ng-show="outerForm.obj_id_episodio.$error.exists">El episodio no existe</span>
                                    </div>
                                </div> 
                                
                                <!------------------------------------------------->

                            </div>
                            <div class="control-group text-right">
                                <div class="controls">
                                    <a class="btn btn-primary" ng-click="save()" ng-disabled="!outerForm.$valid">Guardar</a>
                                    <a class="btn btn-default" ng-click="plist()">Ir al listado de usuarios</a>
                                    <a class="btn btn-default" ng-click="close()">Cerrar</a>
                                </div>
                            </div>
                        </form>
                        <div ng-show="status">                        
                            <div class="alert alert-success" ng-show="response.status == 200">
                                <h2>{{status}}</h2>
                                <a ng-href="{{ob}}/view/{{bean.id}}">Ver {{obtitle}}</a>
                            </div>
                            <div class="alert alert-danger" ng-show="response.status != 200">
                                <h2>{{status}}</h2>                             
                            </div>
                        </div>
                    </div>
                    <div class="panel-footer" style="font-family: Questrial, serif;" ng-include="'js/system/footer.html'"></div>
                </div>
            </div>
        </div>
    </div>     
</div>